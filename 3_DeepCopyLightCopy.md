
# 깊은 복사와 얕은 복사에 대해서 설명해주세요

깊은 복사는 값타입에서 이루어집니다.
복사할 경우, 그 값 자체를 복사해 새로운 메모리 공간에 저장합니다.
각각의 메모리 공간에 값을 가지고 있기 때문에 값을 변형해도 서로 영향이 없습니다.

얕은 복사는 참조타입에서 이루어집니다.
복사할 경우, 새로운 메모리 공간을 만들지 않고, 같은 메모리 주소를 바라보게 됩니다.
원본과 같은 메모리 주소를 바라보는 것이기 때문에 변형이 일어나면 영향을 받습니다.

얕은 복사는 메모리를 참조하는 방식이라 메모리를 효율적으로 사용할 수 있습니다.
깊은 복사의 경우, 메모리의 공간을 새롭게 할당해서 쓰는 것이기 때문에
만약 많은 양의 데이터일 경우에 메모리 공간에 비효율적일 수 있습니다.

때문에 스위프트에서는 깊은 복사에 대해서 Copy On Write라는 것이 이루어집니다.
Copy On Write란, 처음 복사되었을 때에는 얕은 복사를 해서 같은 메모리 주소를 바라보고 있다가
값의 변형이 일어나게 되면 그때 깊은 복사가 이루어져 메모리 공간을 할당해 쓰는 방식입니다.

값 타임에도 불구하고 컴파일 타임에 정확한 사이즈를 알기 어려운 가변 길이를 가진 Collection Type과 String Type은 Heap에 데이터를 저장하여 사용하기 때문에 매번 깊은 복사를 사용하기에는 높은 메모리 오버헤드가 발생할 수 있어
Copy On Write를 사용합니다.. (짧은 문자열은 Heap 영역이 아닌 Stack 영역에 직접 저장되기도 합니다.)

### 🗝️ Keyword

타입 / 메모리 공간 / 원본 변화 영향 / 메모리 효율 / Copy on Write