MVC 와 MVVM

## 왜 MVC 가 불편한가?

MVC에서는 Controller가 View와 Model의 중재자가 된다.
간단한 앱에서는 문제가 없지만
그렇기 때문에 앱에 관련된 로직을 모두 담당하게 되고, 이것 때문에 무거워지게 된다.

비즈니스 로직과 뷰의 로직이 함께 있기 때문에 그것을 분리하기 힘들고, 테스트도 힘들어진다.
그래서, 비즈니스 로직과 뷰의 로직을 분리하자! 라는 것이 MVVM이다.

### MVC의 장점
- 단순하고 직관적이다. 
- 간단한 패턴이기 때문에 구조 파악과 확장이 쉽다.
- 복잡하지 않은 프로젝트라면, 배우기 쉽고 적용하기 쉽다.

###  MVVM은 우선 Model, View, View Model 이다.

여기서의 View는 기존의 UIView와 ViewController를 말한다. (보여지는 것, 보여지는 것을 처리하는 것)
ViewModel은 View에 보여지는 것을 만들기 위한 모델. 비즈니스 로직을 처리하는 곳.
그래서 View는 ViewModel을 참고해서 UI를 그리게 되고, 이 과정에서 데이터 바인딩이 이루어진다.

바인딩이란, View와 Model을 묶어서 (Bind 해서) 한 쪽에서의 변경이 다른 쪽으로 자동 반영되게 하는 것.

이 데이터가 바뀌었다? => View도 에서도 그 바뀐 것을 보여줘야 한다.

View에서 액션이 이루어지면, ViewModel은 Model을 참고해 처리하고, 그 결과를 View에서 참고해서 보여준다.

###  MVVM 패턴의 장점
- 뷰에 대한 로직과 비즈니스 로직이 분리되어 있기 때문에 생산성이 높다. (생각을 분리해서 하는 것)
- 유닛 테스트에 유용하다.


### MVVM의 단점

- 러닝커브 (설계가 어렵고, 처음에는 비즈니스 로직과 view에 대한 처리를 구분해서 생각하는게 어려울 수 있다.)
- 간단한 처리를 해줄 경우에는 오히려 데이터 바인딩에 대한 추가적인 작업이 더 필요해서 오히려 코드량이 더 늘어날 수 있다.
- 간단한 프로젝트의 경우에는 오히려 생산성이 떨어질 수 있다.
- MVVM도 결국엔 VM에서 처리해야 하는 것들이 많을 경우에는 비대해질 수 있다. -> 클린 아키텍쳐

### 클린 아키텍쳐란

소프트웨어 시스템을 여러 계층으로 나눠서 각 계층이 특정 역할을 수행하도록 하는 아키텍쳐 디자인 패턴.
프레젠테이션 계층(보여지는 부분), 
애플리케이션 계층 (비즈니스 로직 처리, 사용자 입력을 받아서 상호작용, 필요한 데이터 가져오는 역할),
도메인 (도메인 모델과 비즈니스 규칙, 핵심 비즈니스 로직 담당)
인프라 스트럭쳐 - 외부 자원과의 상호 작용 - 데이터 페이스, 네트워크 통신등에 관련된 것들

### UIKit/ SwiftUI

UIKit에서는 기본적으로 UIView + ViewController 이 강하게 연결되어 있기 때문에 MVVM을 깔끔하게 구현하기가 어렵다.
그래서 SwiftUI에서는 ViewController를 강제하는 구조가 아예 사라졌고,
State를 받아서 View를 그리는 함수의 형태로 작동한다.
State(표현해야 하는 값)을 받아서, View에 바로 반영 (다시 그리는) 구조이기 때문에 MVVM 구조를 프레임 단에서 의도했다고 볼 수 있다.

UIKit : 데이터 패치 버튼 눌름 -> ViewController 버튼이 눌렸대, ViewModel에서 처리해줘
ViewModel: 데이터 받아옴, Model 참고해서 데이터 만들었어! -> Controller야 참고해서 표현해 -> 알겠어! View한테 다시 그리라고 할게

SwiftUI : 버튼 누름 -> View : 야, 지금 당장 여기서 처리하든지 할거 많은면 ViewModel 가서 해 -> ViewModel : 데이터 패치하고 모델로 우리거에 맞게 만들어서 가지고 있어야겠다! => State에서 그 Published된 값 바라보고 있음 -> View: 아 그 값 바뀌었으면 다시 그려야겠다!


